<!DOCTYPE html>
<html>
    <head>
    
      <title>Myblackicoffee.com</title>

      <meta charset="utf-8" />
      <meta name="format-detection" content="telephone=no" />
      <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
      <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
      
      <!-- jQuery Mobile -->  
      
      <!-- Custom jQuery Mobile themes -->
      <link rel="stylesheet" href="app/themes/letvapp/css/bsqzchina.css?v1" />
      <link rel="stylesheet" href="app/themes/letvapp/jquery.mobile.icons.min.css" />
      <link rel="stylesheet" href="jquery.mobile.structure-1.4.5.min.css" />

      <script src="jquery-1.9.1.min.js"></script>
      <script src="jquery.mobile-1.4.5.min.js"></script>
      
      <script src="swipe.js"></script>
      
      <!-- jDrupal -->
      <script type="text/javascript" charset="utf-8" src="jdrupal-7.x-1.3.min.js"></script>
      
      <!-- DrupalGap -->
      <script type="text/javascript" charset="utf-8" src="bin/drupalgap-7.x-1.2.min.js"></script>
      <script type="text/javascript" charset="utf-8" src="app/settings.js"></script>
      <link rel="stylesheet" href="drupalgap.css" />
      
      <!-- swiper -->
      <script type="text/javascript" src="app/modules/custom/letvapp/letvapp.inline.js?4"></script>
      
      <!-- swiper -->
      <script type="text/javascript" src="app/themes/letvapp/js/swiper.min.js"></script>
      <link rel="stylesheet" href="app/themes/letvapp/css/swiper.min.css?4" />
      

    </head>
    <body>

      <div id="_drupalgap_splash" class="welcome" data-role="page">
         <!-- http://www.css-jquery-design.com/2015/04/html5-full-screen-video-page-background/ -->
         <link rel="stylesheet" href="app/themes/letvapp/css/video.css" />
         <video id="my-video" class="video" autoplay muted loop style="display: none;">
           <source src="http://demo.web3designs.com/media/demo.mp4" type="video/mp4">
         </video>
          
          <script>
          // http://stackoverflow.com/questions/8364313/chrome-html5-video-buffered-end-event
          myVideoTag = document.getElementById('my-video');
          console.log(myVideoTag);
          myVideoTag.addEventListener('progress', function(e) {
              var percent = null;
              // FF4+, Chrome
              if (myVideoTag && myVideoTag.buffered && myVideoTag.buffered.length > 0 && myVideoTag.buffered.end && myVideoTag.duration) {
                  percent = myVideoTag.buffered.end(0) / myVideoTag.duration;
              } 
              // Some browsers (e.g., FF3.6 and Safari 5) cannot calculate target.bufferered.end()
              // to be anything other than 0. If the byte count is available we use this instead.
              // Browsers that support the else if do not seem to have the bufferedBytes value and
              // should skip to there. Tested in Safari 5, Webkit head, FF3.6, Chrome 6, IE 7/8.
              else if (myVideoTag && myVideoTag.bytesTotal != undefined && myVideoTag.bytesTotal > 0 && myVideoTag.bufferedBytes != undefined) {
                  percent = myVideoTag.bufferedBytes / myVideoTag.bytesTotal;
              }

              if (percent !== null) {
                  percent = 100 * Math.min(1, Math.max(0, percent));

                  if (percent > 50 && percent <100) {
                    console.log("percent" + percent);
                    $("#intro").show("slow");
                    $("#my-video").show();
                  }
                  
                  if (percent == 100) {
                    loadDrupalGap();
                  }
              }

          }, false);
          </script>
          <span class="welcome-version">&#169; Myblackicoffee.com</span>
      </div>

      <!-- Load DrupalGap -->
      <script type="text/javascript">
        function loadDrupalGap() {
          drupalgap_onload();
        }
       /* drupalgap_onload(); */
      </script>

    </body>
</html>

